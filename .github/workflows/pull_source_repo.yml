name: Pull from source repo

on:
    workflow_dispatch

jobs:
    pull:
        runs-on: ubuntu-latest

        steps:
            -   name: Checkout 
                uses: actions/checkout@v3
            -   name: Pull from source repo
                run: |
                    git config --local user.email "github-actions[bot]@users.noreply.github.com"
                    git config --local user.name "github-actions[bot]"
                    git sparse-checkout set --no-cone dart javascript
                    git fetch https://github.com/kodjodevf/mangayomi-extensions.git main
                    git checkout main
                    if git diff --cached --quiet; then
                        echo "No changes detected, skipping commit."
                    else
                        git sparse-checkout disable
                        git commit -m "Update extensions"
                        git push origin main --force
                    fi